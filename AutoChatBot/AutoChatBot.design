# AutoChatBot Design

## Abstract
The `AutoChatBot` class is the main orchestrator for the chatbot functionalities. It incorporates various components such as context management, API handling, and code execution. This design document outlines the integration of the `MultiFileAgent` into the `AutoChatBot`, adds a new parser argument for calling the multi-file agent, and expands on the testing strategy. Additionally, it supports reading the question from a file to handle long questions conveniently and executing a list of files, returning their stdout and stderr outputs.

## Class Design

### Methods

1. **main**
   - **Description**: The main method to run the chatbot. It parses arguments and executes the chatbot logic.
   - **Arguments**: None.
   - **Returns**: None.

2. **execute_multifile_agent**
   - **Description**: Executes the multi-file agent to generate and update multiple files based on reference files and user-provided questions.
   - **Arguments**:
     - `reference_files` (`list`): List of paths to the reference files.
     - `rewrite_files` (`list`): List of paths to the rewrite files.
     - `question` (`str`, optional): The question to be included in the task string. Default is `None`.
     - `question_file_path` (`str`, optional): The path to the file containing the question. Default is `None`.
     - `debug` (`bool`): Debug flag.
   - **Returns**: `dict`: Dictionary with file paths as keys and generated content as values.

3. **execute_files**
   - **Description**: Executes a list of Python files and captures their stdout and stderr outputs.
   - **Arguments**:
     - `file_paths` (`list`): List of paths to Python files to be executed.
   - **Returns**: `dict`: Dictionary with file paths as keys and tuples of (stdout, stderr) as values.

### Error Handling

- **execute_multifile_agent**
  - **FileNotFoundError**: Raised if any reference file does not exist.
  - **IOError**: Raised if there is an issue reading the files.

- **execute_files**
  - **FileNotFoundError**: Raised if any file to be executed does not exist.
  - **ExecutionError**: Raised if there is an error during file execution.

### How it Works

1. **main**:
   - Step 1: Parse command-line arguments using `argparse`.
   - Step 2: Depending on the parsed arguments, execute the appropriate functionality such as showing available contexts, showing models, running code, executing the multi-file agent, or executing files.

2. **execute_multifile_agent**:
   - Step 1: Call `MultiFileAgent.execute` with the provided reference files, rewrite files, question, and question file path.
   - Step 2: Return the dictionary with the generated content.

3. **execute_files**:
   - Step 1: Call `PythonFileExecutor.execute` with the provided file paths.
   - Step 2: Return the dictionary with the execution outputs.

### Class Paradigm

- The class follows a procedural paradigm with static methods.
- Uses modular design to separate different functionalities.

### Testing Strategy

- **Test `main`**:
  - Verify that the method correctly parses arguments and executes the corresponding functionalities.
  - Mock external dependencies such as file I/O and API requests.

- **Test `execute_multifile_agent`**:
  - Verify that the method correctly integrates with `MultiFileAgent`.
  - Include tests that mock file I/O and API requests to ensure the method's robustness.

- **Test `execute_files`**:
  - Verify that the method correctly executes files and captures their outputs.
  - Include tests that mock file execution to ensure the method's robustness.

### Integration

- **MultiFileAgent**: Integrated as a static method call within `AutoChatBot`.
- **PythonFileExecutor**: Integrated as a static method call within `AutoChatBot`.
- **Parser Argument**: Added new arguments `--multi_file_agent` and `--execute_files` to trigger the multi-file agent functionality and specify files to execute.
- **Question File Path**: Added a new argument `--question_file_path` to specify a file containing the question.
- **Output Directory**: Added a new argument `--output_dir` to specify the directory where plots will be saved.

### Example Usage